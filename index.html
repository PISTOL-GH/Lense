<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunglasses Lens Recommender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .suggestion-box {
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* The active button pseudo-element needs to be in a style block for the CDN */
        .btn-environment.active::after {
            content: '';
            position: absolute;
            top: 4px;
            right: 4px;
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            border: 1px solid #4f46e5;
        }
        .primary-suggestion, .secondary-suggestion {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out, color 0.3s ease-in-out;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .primary-suggestion:hover, .secondary-suggestion:hover {
            transform: translateY(-2px);
        }
        .tint-color-text {
            font-weight: bold;
            font-size: 1.25rem;
        }
    </style>
</head>
<body class="p-4 md:p-6">

    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-2xl overflow-hidden p-4 md:p-6" style="background-color: rgba(255, 255, 255, 0.7);">

        <header class="text-center mb-6">
            <h1 class="text-xl md:text-2xl font-bold text-gray-800 mb-2">Lense Selection</h1>
        </header>

        <div class="mb-4 py-3 border-t border-b border-gray-200">
            <!-- Environment Selection Buttons -->
            <h2 class="text-base font-semibold text-gray-700 mb-2">Environment</h2>
            <div id="environment-buttons" class="flex flex-wrap gap-2 justify-center mb-4">
                <button data-env="Sunny" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Sunny</button>
                <button data-env="Dawn/Dusk" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Dawn/Dusk</button>
                <button data-env="Night" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Night</button>
                <button data-env="Dense Greenery" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Dense Greenery</button>
                <button data-env="Forest" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Forest</button>
                <button data-env="Bare Trees" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Bare Trees</button>
                <button data-env="Foliage" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Foliage</button>
                <button data-env="Fog/Haze" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Fog/Haze</button>
                <button data-env="Rain" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Rain</button>
                <button data-env="Snow" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Snow</button>
                <button data-env="Glacial" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Glacial</button>
            </div>
            
            <h2 class="text-base font-semibold text-gray-700 mb-2">Activities</h2>
            <div id="activities-buttons" class="flex flex-wrap gap-2 justify-center">
                <button data-env="Driving" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Driving</button>
                <button data-env="Hiking" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Hiking</button>
                <button data-env="Golfing" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Golfing</button>
                <button data-env="Beach" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Beach</button>
                <button data-env="Fishing" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Fishing</button>
                <button data-env="Skiing" class="relative bg-white text-gray-700 px-3 py-1.5 rounded-full border border-gray-300 font-medium transition-all duration-200 ease-in-out cursor-pointer hover:bg-gray-100 btn-environment text-sm">Skiing</button>
            </div>
        </div>

        <!-- Action Button -->
        <div class="flex justify-center mb-4">
            <button id="clear-button" class="px-5 py-1.5 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors duration-200 text-sm">Clear All</button>
        </div>


        <div id="suggestions-container" class="space-y-3">

            <!-- Primary Suggestion -->
            <h2 class="text-base font-semibold text-gray-700">Primary Suggestion</h2>
            <div id="primary-suggestion-box" class="suggestion-box primary-suggestion">
                <div id="primary-tint-info">
                    <p class="text-xs">Select one or more environments to get your primary lens recommendation.</p>
                </div>
            </div>

            <!-- Secondary Suggestion -->
            <h2 class="text-base font-semibold mt-3 text-gray-700">Secondary Suggestion</h2>
            <div id="secondary-suggestion-box" class="suggestion-box secondary-suggestion">
                <div id="secondary-tint-info">
                    <p class="text-xs">Select more environments to get additional lens recommendations.</p>
                </div>
            </div>

            <!-- All Suggestions -->
            <div id="all-suggestions" class="suggestion-box all-suggestions hidden">
                <h2 class="text-base font-semibold text-gray-700 mb-2">All Recommendations</h2>
                <ul id="all-tints-list" class="list-disc list-inside text-xs"></ul>
            </div>
            
        </div>

    </div>

    <script>
        // Data mapping environments to recommended tints, with a primary and secondary ranking
        const recommendations = {
            'Sunny': { primary: 'Grey', secondary: 'Brown' },
            'Night': { primary: 'Clear', secondary: null },
            'Dawn/Dusk': { primary: 'Yellow', secondary: 'Rose/Red' },
            'Forest': { primary: 'Brown', secondary: 'Green' },
            'Bare Trees': { primary: 'Brown', secondary: 'Yellow' },
            'Dense Greenery': { primary: 'Green', secondary: 'Brown' },
            'Foliage': { primary: 'Brown', secondary: 'Green' },
            'Snow': { primary: 'Rose/Red', secondary: 'Brown' },
            'Glacial': { primary: 'Glacial-Tint', secondary: 'Rose/Red' },
            'Driving': { primary: 'Grey', secondary: 'Brown' },
            'Fog/Haze': { primary: 'Yellow', secondary: null },
            'Rain': { primary: 'Yellow', secondary: 'Clear' },
            'Fishing': { primary: 'Brown', secondary: 'Grey' },
            'Skiing': { primary: 'Rose/Red', secondary: 'Yellow' },
            'Golfing': { primary: 'Green', secondary: 'Brown' },
            'Hiking': { primary: 'Brown', secondary: 'Rose/Red' },
            'Beach': { primary: 'Grey', secondary: 'Brown' },
        };

        // Data mapping tint names to detailed descriptions
        const tintDescriptions = {
            'Grey': 'Reduces light evenly without color distortion. Great for general, bright-light use.',
            'Brown': 'A versatile tint that enhances contrast and depth perception, bringing out reds and yellows. Excellent for visual separation on a trail.',
            'Green': 'Provides a balanced view, reducing glare and eye strain in lush environments.',
            'Rose/Red': 'Blocks blue light and provides high contrast, enhancing depth perception and clarity in low-light and snowy conditions.',
            'Yellow': 'Significantly improves contrast and visibility in low-light, foggy, or hazy conditions.',
            'Clear': 'Provides eye protection from wind or debris without any tint.',
            'Glacial-Tint': 'A specialized, very dark polarized lens (5% VLT) for extreme glare on snow and ice. Not suitable for driving.'
        };


        // Mapping tint names to hex colors
        const tintColors = {
            'Grey': '#6b7280',
            'Brown': '#a0522d',
            'Green': '#047857',
            'Rose/Red': '#e11d48',
            'Yellow': '#facc15',
            'Clear': '#9ca3af',
            'Glacial-Tint': '#2c2c2c'
        };

        const environmentButtonsContainer = document.getElementById('environment-buttons');
        const activitiesButtonsContainer = document.getElementById('activities-buttons');
        const clearButton = document.getElementById('clear-button');
        const primaryInfo = document.getElementById('primary-tint-info');
        const secondaryInfo = document.getElementById('secondary-tint-info');
        const primarySuggestionBox = document.getElementById('primary-suggestion-box');
        const secondarySuggestionBox = document.getElementById('secondary-suggestion-box');


        let selectedEnvironments = new Set();

        function updateRecommendations() {
            const tintScores = {};
            selectedEnvironments.forEach(env => {
                const rec = recommendations[env];
                if (rec) {
                    // Give primary suggestions a higher score to prioritize them
                    tintScores[rec.primary] = (tintScores[rec.primary] || 0) + 2;
                    if (rec.secondary) {
                        tintScores[rec.secondary] = (tintScores[rec.secondary] || 0) + 1;
                    }
                }
            });

            const sortedTints = Object.keys(tintScores).sort((a, b) => tintScores[b] - tintScores[a]);

            // Function to determine the text color based on the tint's background color
            const updateTextColorClass = (box, tint) => {
                if (tint === 'Yellow' || tint === 'Clear') {
                    box.classList.remove('text-white');
                    box.classList.add('text-gray-700');
                } else {
                    box.classList.remove('text-gray-700');
                    box.classList.add('text-white');
                }
            };
            
            // Update primary suggestion
            if (sortedTints.length > 0) {
                const primaryTint = sortedTints[0];
                const primaryDescription = tintDescriptions[primaryTint];
                primarySuggestionBox.style.backgroundColor = tintColors[primaryTint];
                updateTextColorClass(primarySuggestionBox, primaryTint);
                updateTextColorClass(primaryInfo, primaryTint);


                primaryInfo.innerHTML = `
                    <span class="tint-color-text">${primaryTint}</span>
                    <p class="mt-2 text-sm">${primaryDescription}</p>
                `;
            } else {
                primarySuggestionBox.style.backgroundColor = '#e5e7eb';
                primarySuggestionBox.classList.remove('text-white');
                primarySuggestionBox.classList.add('text-gray-700');
                primaryInfo.classList.remove('text-white');
                primaryInfo.classList.add('text-gray-700');
                primaryInfo.innerHTML = '<p class="text-sm">Select one or more environments to get your primary lens recommendation.</p>';
            }

            // Update secondary suggestion
            if (sortedTints.length > 1) {
                const secondaryTint = sortedTints[1];
                const secondaryDescription = tintDescriptions[secondaryTint];
                secondarySuggestionBox.style.backgroundColor = tintColors[secondaryTint];
                updateTextColorClass(secondarySuggestionBox, secondaryTint);
                updateTextColorClass(secondaryInfo, secondaryTint);


                secondaryInfo.innerHTML = `
                    <span class="tint-color-text">${secondaryTint}</span>
                    <p class="mt-2 text-sm">${secondaryDescription}</p>
                `;
            } else {
                secondarySuggestionBox.style.backgroundColor = '#e5e7eb';
                secondarySuggestionBox.classList.remove('text-white');
                secondarySuggestionBox.classList.add('text-gray-700');
                secondaryInfo.classList.remove('text-white');
                secondaryInfo.classList.add('text-gray-700');
                secondaryInfo.innerHTML = '<p class="text-sm">Select more environments to get additional lens recommendations.</p>';
            }
        }

        environmentButtonsContainer.addEventListener('click', (e) => {
            const button = e.target;
            if (button.dataset.env) {
                const env = button.dataset.env;
                if (selectedEnvironments.has(env)) {
                    selectedEnvironments.delete(env);
                    button.classList.remove('active');
                } else {
                    selectedEnvironments.add(env);
                    button.classList.add('active');
                }
                updateRecommendations();
            }
        });
        
        activitiesButtonsContainer.addEventListener('click', (e) => {
            const button = e.target;
            if (button.dataset.env) {
                const env = button.dataset.env;
                if (selectedEnvironments.has(env)) {
                    selectedEnvironments.delete(env);
                    button.classList.remove('active');
                } else {
                    selectedEnvironments.add(env);
                    button.classList.add('active');
                }
                updateRecommendations();
            }
        });

        clearButton.addEventListener('click', () => {
            selectedEnvironments.clear();
            document.querySelectorAll('.btn-environment').forEach(btn => {
                btn.classList.remove('active');
            });
            updateRecommendations();
        });

        // Initial update
        updateRecommendations();
    </script>
</body>
</html>
